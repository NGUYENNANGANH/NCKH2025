<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HtStore - Trang ch·ªß</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <style>
        body { background: #f6f8fa; }
        .main-blue { color: #1565c0; }
        .bg-main-blue { background: #1565c0 !important; color: #fff; }
        .service-box {
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.04);
            padding: 1.5rem 1rem;
            text-align: center;
            margin-bottom: 1rem;
        }
        .service-box i {
            font-size: 2rem;
            color: #1565c0;
            margin-bottom: 0.5rem;
        }
        .product-card {
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
            transition: box-shadow 0.2s, transform 0.2s;
            overflow: hidden;
        }
        .product-card:hover {
            box-shadow: 0 8px 24px rgba(21,101,192,0.15);
            transform: translateY(-4px) scale(1.02);
        }
        .product-img {
            width: 100%;
            height: 220px;
            object-fit: cover;
            background: #e3eaf6;
        }
        .product-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 0.25rem;
        }
        .product-price {
            color: #1565c0;
            font-size: 1.1rem;
            font-weight: bold;
            margin: 0.5rem 0;
        }
        .carousel-indicators [data-bs-target] {
            background-color: #1565c0;
        }
        .best-seller-badge {
            position: absolute;
            top: 12px;
            left: 12px;
            background: #e53935;
            color: #fff;
            font-size: 0.85rem;
            padding: 0.25rem 0.75rem;
            border-radius: 8px;
            font-weight: 600;
        }

        /* Info Cards Styles */
        .info-cards {
            padding: 4rem 0;
            background-color: #f8f9fa;
        }

        .info-card {
            background: #fff;
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 2px 12px rgba(21,101,192,0.07);
            height: 100%;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .info-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 24px rgba(21,101,192,0.15);
        }

        .info-card .icon-box {
            width: 64px;
            height: 64px;
            margin: 0 auto 1.5rem;
            background: #1565c0;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .info-card .icon-box i {
            font-size: 1.75rem;
            color: #fff;
        }

        .info-card h3 {
            font-size: 1.25rem;
            font-weight: 600;
            color: #1565c0;
            margin-bottom: 1rem;
        }

        .info-card p {
            color: #666;
            font-size: 0.95rem;
            line-height: 1.6;
            margin-bottom: 0;
        }

        @media (max-width: 768px) {
            .info-card {
                padding: 1.5rem;
            }
            
            .info-card .icon-box {
                width: 56px;
                height: 56px;
                margin-bottom: 1rem;
            }

            .info-card h3 {
                font-size: 1.1rem;
            }

            .info-card p {
                font-size: 0.9rem;
            }
        }

        /* Chatbot Styles */
        #chatbot-container {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 400px;
            height: 600px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.2);
            display: flex;
            flex-direction: column;
            z-index: 1000;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        #chatbot-container.hidden {
            display: none;
        }

        #chatbot-header {
            padding: 20px;
            background: linear-gradient(135deg, #1565c0, #0d47a1);
            color: white;
            border-radius: 20px 20px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 1.2rem;
            font-weight: 600;
        }

        #close-btn {
            background: none;
            border: none;
            color: white;
            font-size: 28px;
            cursor: pointer;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: background-color 0.3s;
        }

        #close-btn:hover {
            background-color: rgba(255,255,255,0.1);
        }

        #chatbot-body {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            background: #f8f9fa;
        }

        #chatbot-messages {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .message {
            max-width: 85%;
            padding: 12px 18px;
            border-radius: 18px;
            margin: 5px 0;
            font-size: 0.95rem;
            line-height: 1.5;
            position: relative;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .message.user {
            background: #1565c0;
            color: white;
            align-self: flex-end;
            border-bottom-right-radius: 5px;
        }

        .message.bot {
            background: white;
            color: #333;
            align-self: flex-start;
            border-bottom-left-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        #chatbot-input-container {
            padding: 20px;
            background: white;
            border-top: 1px solid #eee;
            display: flex;
            gap: 12px;
            border-radius: 0 0 20px 20px;
        }

        #chatbot-input {
            flex: 1;
            padding: 12px 20px;
            border: 2px solid #e3eaf6;
            border-radius: 25px;
            outline: none;
            font-size: 0.95rem;
            transition: border-color 0.3s;
        }

        #chatbot-input:focus {
            border-color: #1565c0;
        }

        #send-btn {
            background: #1565c0;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        #send-btn:hover {
            background: #0d47a1;
            transform: translateY(-1px);
        }

        #send-btn:active {
            transform: translateY(1px);
        }

        /* Chatbot Icon Styles */
        #chatbot-icon {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 65px;
            height: 65px;
            background: linear-gradient(135deg, #1565c0, #0d47a1);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(21,101,192,0.3);
            transition: all 0.3s ease;
            z-index: 1000;
        }

        #chatbot-icon:hover {
            transform: scale(1.1) rotate(5deg);
            box-shadow: 0 6px 20px rgba(21,101,192,0.4);
        }

        #chatbot-icon:active {
            transform: scale(0.95);
        }

        /* Custom Scrollbar */
        #chatbot-body::-webkit-scrollbar {
            width: 8px;
        }

        #chatbot-body::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 4px;
        }

        #chatbot-body::-webkit-scrollbar-thumb {
            background: #1565c0;
            border-radius: 4px;
        }

        #chatbot-body::-webkit-scrollbar-thumb:hover {
            background: #0d47a1;
        }

        /* Suggested Questions Styles */
        .suggestions-container {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin: 15px 0;
            padding: 0 10px;
        }

        .suggestion-btn {
            background: #e3f2fd;
            border: none;
            padding: 12px 20px;
            border-radius: 15px;
            color: #1565c0;
            font-size: 0.9rem;
            cursor: pointer;
            text-align: left;
            transition: all 0.3s ease;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            position: relative;
            overflow: hidden;
        }

        .suggestion-btn:hover {
            background: #1565c0;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(21,101,192,0.2);
        }

        .suggestion-btn:active {
            transform: translateY(0);
        }

        .suggestion-btn::after {
            content: '';
            position: absolute;
            top: 50%;
            right: 15px;
            transform: translateY(-50%);
            width: 20px;
            height: 20px;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%231565c0'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M9 5l7 7-7 7'/%3E%3C/svg%3E");
            background-size: contain;
            opacity: 0.5;
            transition: all 0.3s ease;
        }

        .suggestion-btn:hover::after {
            opacity: 1;
            right: 10px;
            filter: brightness(0) invert(1);
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
</head>
<body>
    <!-- Header/Navbar -->
    <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm sticky-top">
        <div class="container">
            <a class="navbar-brand fw-bold main-blue" href="index.html">HtStore</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto align-items-center">
                    <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
                    <li class="nav-item"><a class="nav-link" href="products.html">S·∫£n ph·∫©m</a></li>
                    <li class="nav-item"><a class="nav-link" href="cart.html">Gi·ªè h√†ng</a></li>
                    <li class="nav-item"><a class="nav-link" href="orders.html">ƒê∆°n h√†ng</a></li>
                    <li class="nav-item"><a class="nav-link" href="profile.html"><i class="fa fa-user"></i></a></li>
                    <li class="nav-item" id="loginNavItem"><a class="nav-link" href="login.html">ƒêƒÉng nh·∫≠p</a></li>
                    <li class="nav-item" id="logoutNavItem" style="display: none;">
                        <a class="nav-link" href="#" onclick="logout()">ƒêƒÉng xu·∫•t</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="ecommerce-hero-1 hero section" id="hero" style="padding-top: 2.5rem; padding-bottom: 2.5rem;">
      <div class="container">
        <div class="row align-items-center" style="min-height: 520px;">
          <div class="col-lg-6 content-col" data-aos="fade-right" data-aos-delay="100">
            <div class="content">
              <span class="promo-badge">B·ªô s∆∞u t·∫≠p m·ªõi 2025</span>
              <h1 class="hero-title">Discover Stylish <span class="highlight">Fashion</span> For Every Season</h1>
              <p class="hero-desc">HtStore ‚Äì N∆°i b·∫°n kh√°m ph√° th·ªùi trang hi·ªán ƒë·∫°i, ƒëa d·∫°ng cho m·ªçi m√πa. Ch√∫ng t√¥i cam k·∫øt mang ƒë·∫øn s·∫£n ph·∫©m ch·∫•t l∆∞·ª£ng, gi√° t·ªët c√πng d·ªãch v·ª• t·∫≠n t√¢m, gi√∫p b·∫°n t·ª± tin th·ªÉ hi·ªán phong c√°ch m·ªói ng√†y.</p>
              <div class="hero-cta mb-3">
                <a href="products.html" class="btn btn-shop me-2">Mua ngay <i class="bi bi-arrow-right"></i></a>
                <a href="#bestSellers" class="btn btn-collection">Xem b·ªô s∆∞u t·∫≠p</a>
              </div>
              <div class="hero-features d-flex gap-4 mt-3">
                <div class="feature-item d-flex align-items-center gap-2">
                  <i class="bi bi-truck"></i>
                  <span>Giao h√†ng mi·ªÖn ph√≠</span>
                </div>
                <div class="feature-item d-flex align-items-center gap-2">
                  <i class="bi bi-shield-check"></i>
                  <span>Thanh to√°n an to√†n</span>
                </div>
                <div class="feature-item d-flex align-items-center gap-2">
                  <i class="bi bi-arrow-repeat"></i>
                  <span>ƒê·ªïi tr·∫£ d·ªÖ d√†ng</span>
                </div>
              </div>
            </div>
          </div>
          <div class="col-lg-6 image-col d-flex justify-content-center align-items-center position-relative" data-aos="fade-left" data-aos-delay="200">
            <div class="hero-image position-relative" style="min-height: 420px;">
              <img src="https://images.unsplash.com/photo-1512436991641-6745cdb1723f?auto=format&fit=facearea&w=900&q=80" alt="Fashion Product" class="main-product img-fluid rounded-4 shadow" loading="lazy" style="max-height: 420px; width: auto;">
              <div class="discount-badge position-absolute d-flex flex-column align-items-center justify-content-center text-white" data-aos="zoom-in" data-aos-delay="500" style="top: 30px; right: 30px; background: #1565c0; border-radius: 50%; width: 80px; height: 80px;">
                <span class="percent fw-bold" style="font-size: 1.7rem;">30%</span>
                <span class="text" style="font-size: 1.1rem;">GI·∫¢M</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    <style>
      .hero-title {
        font-size: 2.7rem;
        font-weight: 700;
        line-height: 1.1;
        margin-bottom: 0.7rem;
      }
      .hero-title .highlight {
        color: #1565c0;
        text-decoration: underline 5px #e3eaf6;
        text-underline-offset: 6px;
      }
      .promo-badge {
        display: inline-block;
        background: #e3eaf6;
        color: #1565c0;
        font-weight: 600;
        border-radius: 999px;
        padding: 0.35em 1.2em;
        font-size: 1.1rem;
        margin-bottom: 0.7rem;
      }
      .hero-desc {
        font-size: 1.1rem;
        color: #444;
        margin-bottom: 1.1rem;
      }
      .btn-shop {
        background: #1565c0;
        color: #fff;
        font-weight: 600;
        border-radius: 8px;
        padding: 0.65rem 1.5rem;
        font-size: 1.08rem;
        box-shadow: 0 2px 8px rgba(21,101,192,0.08);
        transition: background 0.2s;
      }
      .btn-shop:hover {
        background: #0d47a1;
        color: #fff;
      }
      .btn-collection {
        background: #fff;
        color: #222;
        font-weight: 600;
        border-radius: 8px;
        padding: 0.65rem 1.5rem;
        font-size: 1.08rem;
        border: 2px solid #e3eaf6;
        margin-left: 0.5rem;
        transition: background 0.2s, color 0.2s;
      }
      .btn-collection:hover {
        background: #e3eaf6;
        color: #1565c0;
      }
      .hero-features {
        font-size: 1.05rem;
        color: #1565c0;
        margin-top: 0.7rem;
      }
      .feature-item i {
        font-size: 1.3rem;
      }
      @media (max-width: 991px) {
        .hero-title { font-size: 1.7rem; }
        .hero-image { min-height: 220px; }
      }
      @media (max-width: 767px) {
        .hero-title { font-size: 1.1rem; }
        .hero-image { min-height: 120px; }
        .promo-badge { font-size: 0.95rem; }
      }
    </style>

    <!-- Service Boxes -->
    <div class="bg-light py-5">
      <section id="info-cards" class="info-cards section">
        <div class="container" data-aos="fade-up" data-aos-delay="100">
          <div class="row g-4 justify-content-center">
            <!-- Info Card 1 -->
            <div class="col-12 col-sm-6 col-lg-3" data-aos="fade-up" data-aos-delay="200">
              <div class="info-card text-center">
                <div class="icon-box">
                  <i class="bi bi-truck"></i>
                </div>
                <h3>Giao h√†ng mi·ªÖn ph√≠</h3>
                <p>Giao h√†ng nhanh ch√≥ng v√† mi·ªÖn ph√≠ cho t·∫•t c·∫£ ƒë∆°n h√†ng tr√™n to√†n qu·ªëc. ƒê·∫£m b·∫£o s·∫£n ph·∫©m ƒë·∫øn tay b·∫°n trong th·ªùi gian s·ªõm nh·∫•t.</p>
              </div>
            </div><!-- End Info Card 1 -->

            <!-- Info Card 2 -->
            <div class="col-12 col-sm-6 col-lg-3" data-aos="fade-up" data-aos-delay="300">
              <div class="info-card text-center">
                <div class="icon-box">
                  <i class="bi bi-piggy-bank"></i>
                </div>
                <h3>B·∫£o ƒë·∫£m ho√†n ti·ªÅn</h3>
                <p>Cam k·∫øt ho√†n ti·ªÅn 100% n·∫øu s·∫£n ph·∫©m kh√¥ng ƒë√∫ng nh∆∞ m√¥ t·∫£. Ch√∫ng t√¥i lu√¥n ƒë·∫∑t s·ª± h√†i l√≤ng c·ªßa kh√°ch h√†ng l√™n h√†ng ƒë·∫ßu.</p>
              </div>
            </div><!-- End Info Card 2 -->

            <!-- Info Card 3 -->
            <div class="col-12 col-sm-6 col-lg-3" data-aos="fade-up" data-aos-delay="400">
              <div class="info-card text-center">
                <div class="icon-box">
                  <i class="bi bi-percent"></i>
                </div>
                <h3>∆Øu ƒë√£i h·∫•p d·∫´n</h3>
                <p>Th∆∞·ªùng xuy√™n c·∫≠p nh·∫≠t c√°c ch∆∞∆°ng tr√¨nh khuy·∫øn m√£i, gi·∫£m gi√° ƒë·∫∑c bi·ªát. Mua s·∫Øm th√¥ng minh v·ªõi gi√° t·ªët nh·∫•t th·ªã tr∆∞·ªùng.</p>
              </div>
            </div><!-- End Info Card 3 -->

            <!-- Info Card 4 -->
            <div class="col-12 col-sm-6 col-lg-3" data-aos="fade-up" data-aos-delay="500">
              <div class="info-card text-center">
                <div class="icon-box">
                  <i class="bi bi-headset"></i>
                </div>
                <h3>H·ªó tr·ª£ 24/7</h3>
                <p>ƒê·ªôi ng≈© t∆∞ v·∫•n vi√™n chuy√™n nghi·ªáp lu√¥n s·∫µn s√†ng h·ªó tr·ª£ b·∫°n m·ªçi l√∫c, m·ªçi n∆°i. Gi·∫£i ƒë√°p m·ªçi th·∫Øc m·∫Øc nhanh ch√≥ng v√† hi·ªáu qu·∫£.</p>
              </div>
            </div><!-- End Info Card 4 -->
          </div>
        </div>
      </section>
    </div>

    <!-- Featured Products -->
    <section class="container mb-5">
        <h3 class="mb-3 main-blue">S·∫£n ph·∫©m n·ªïi b·∫≠t</h3>
        <div id="featuredCarousel" class="carousel slide" data-bs-ride="carousel">
            <div class="carousel-inner">
                <div class="carousel-item active">
                    <div class="row g-3" id="featuredProducts">
                        <!-- S·∫£n ph·∫©m n·ªïi b·∫≠t s·∫Ω ƒë∆∞·ª£c render ·ªü ƒë√¢y b·∫±ng JS -->
                    </div>
                </div>
            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#featuredCarousel" data-bs-slide="prev">
                <span class="carousel-control-prev-icon"></span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#featuredCarousel" data-bs-slide="next">
                <span class="carousel-control-next-icon"></span>
            </button>
        </div>
    </section>

    <!-- Best Sellers -->
    <section class="container mb-5" id="bestSellers">
        <h3 class="mb-4 main-blue">Best Sellers</h3>
        <div class="row g-4" id="productsList">
            <!-- S·∫£n ph·∫©m s·∫Ω ƒë∆∞·ª£c render ·ªü ƒë√¢y b·∫±ng JS -->
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-white py-4 mt-5">
        <div class="container">
            <div class="row">
                <div class="col-md-4">
                    <h5 class="main-blue mb-3">V·ªÅ ch√∫ng t√¥i</h5>
                    <p>HtStore - N∆°i mua s·∫Øm tr·ª±c tuy·∫øn ƒë√°ng tin c·∫≠y v·ªõi h√†ng ng√†n s·∫£n ph·∫©m ch·∫•t l∆∞·ª£ng.</p>
                </div>
                <div class="col-md-4">
                    <h5 class="main-blue mb-3">Li√™n k·∫øt nhanh</h5>
                    <ul class="list-unstyled">
                        <li><a href="index.html" class="text-decoration-none">Trang ch·ªß</a></li>
                        <li><a href="products.html" class="text-decoration-none">S·∫£n ph·∫©m</a></li>
                        <li><a href="cart.html" class="text-decoration-none">Gi·ªè h√†ng</a></li>
                        <li><a href="orders.html" class="text-decoration-none">ƒê∆°n h√†ng</a></li>
                    </ul>
                </div>
                <div class="col-md-4">
                    <h5 class="main-blue mb-3">Li√™n h·ªá</h5>
                    <ul class="list-unstyled">
                        <li><i class="fas fa-phone me-2"></i> 0123 456 789</li>
                        <li><i class="fas fa-envelope me-2"></i> contact@htstore.com</li>
                        <li><i class="fas fa-map-marker-alt me-2"></i> 123 ƒê∆∞·ªùng ABC, Qu·∫≠n XYZ, TP.HCM</li>
                    </ul>
                </div>
            </div>
            <hr>
            <div class="row mt-4">
                <div class="col-12">
                    <div class="payment-methods text-center mb-3">
                        <span class="text-muted me-2">Ch·∫•p nh·∫≠n thanh to√°n:</span>
                        <div class="d-inline-flex gap-3">
                            <i class="fab fa-cc-visa fa-lg" style="color: #1A1F71;" aria-label="Visa"></i>
                            <i class="fab fa-cc-mastercard fa-lg" style="color: #EB001B;" aria-label="Mastercard"></i>
                            <i class="fab fa-cc-paypal fa-lg" style="color: #003087;" aria-label="PayPal"></i>
                            <i class="fab fa-cc-apple-pay fa-lg" style="color: #000000;" aria-label="Apple Pay"></i>
                            <i class="fas fa-money-bill-wave fa-lg" style="color: #28a745;" aria-label="Ti·ªÅn m·∫∑t"></i>
                        </div>
                    </div>
                    <div class="legal-links text-center mb-3">
                        <a href="tos.html" class="text-decoration-none text-muted me-3">ƒêi·ªÅu kho·∫£n s·ª≠ d·ª•ng</a>
                        <a href="privacy.html" class="text-decoration-none text-muted me-3">Ch√≠nh s√°ch b·∫£o m·∫≠t</a>
                        <a href="cookies.html" class="text-decoration-none text-muted">C√†i ƒë·∫∑t cookie</a>
                    </div>
                    <div class="copyright text-center">
                        <p class="mb-0 text-muted">&copy; 2024 <strong class="main-blue">HtStore</strong>. T·∫•t c·∫£ quy·ªÅn ƒë∆∞·ª£c b·∫£o l∆∞u.</p>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Modal Ch·ªçn th√¥ng tin s·∫£n ph·∫©m -->
    <div class="modal fade" id="productSelectionModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Ch·ªçn th√¥ng tin s·∫£n ph·∫©m</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="productSelectionForm">
                        <input type="hidden" id="selectedProductId">
                        <div class="mb-3">
                            <label class="form-label">S·ªë l∆∞·ª£ng</label>
                            <div class="input-group">
                                <button type="button" class="btn btn-outline-secondary" onclick="updateModalQuantity(-1)">-</button>
                                <input type="number" class="form-control text-center" id="modalQuantity" value="1" min="1">
                                <button type="button" class="btn btn-outline-secondary" onclick="updateModalQuantity(1)">+</button>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">K√≠ch c·ª°</label>
                            <select class="form-select" id="modalSize" required>
                                <option value="">Ch·ªçn k√≠ch c·ª°</option>
                                <option value="1">S</option>
                                <option value="2">M</option>
                                <option value="3">L</option>
                                <option value="4">XL</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">M√†u s·∫Øc</label>
                            <select class="form-select" id="modalColor" required>
                                <option value="">Ch·ªçn m√†u s·∫Øc</option>
                                <option value="ƒêen">ƒêen</option>
                                <option value="Tr·∫Øng">Tr·∫Øng</option>
                                <option value="Xanh">Xanh</option>
                                <option value="ƒê·ªè">ƒê·ªè</option>
                            </select>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ƒê√≥ng</button>
                    <button type="button" class="btn btn-primary" onclick="submitToCart()">Th√™m v√†o gi·ªè h√†ng</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Chatbot Container -->
    <div id="chatbot-container" class="hidden">
        <div id="chatbot-header">
            <span>ChatBot</span>
            <button id="close-btn">&times;</button>
        </div>
        <div id="chatbot-body">
            <div id="chatbot-messages"></div>
        </div>
        <div id="chatbot-input-container">
            <input type="text" id="chatbot-input" placeholder="Type a message">
            <button id="send-btn">Send</button>
        </div>
    </div>

    <!-- Chatbot Icon -->
    <div id="chatbot-icon" style="display: flex;">üí¨</div>

    <script src="common.js"></script>
    <script src="CHATBOT-GEMINI-main/script.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Check authentication status on page load
        document.addEventListener('DOMContentLoaded', function() {
            const token = localStorage.getItem('token');
            const loginNavItem = document.getElementById('loginNavItem');
            const logoutNavItem = document.getElementById('logoutNavItem');

            if (token) {
                loginNavItem.style.display = 'none';
                logoutNavItem.style.display = 'block';
            } else {
                loginNavItem.style.display = 'block';
                logoutNavItem.style.display = 'none';
            }
        });

        // Logout function
        function logout() {
            localStorage.removeItem('token');
            localStorage.removeItem('user');
            window.location.href = 'index.html';
        }

        // H√†m chuy·ªÉn ƒë·∫øn trang chi ti·∫øt s·∫£n ph·∫©m
        function goToProductDetail(id) {
            window.location.href = `product-detail.html?id=${id}`;
        }
        // Kh·ªüi t·∫°o modal Bootstrap
        const productSelectionModal = new bootstrap.Modal(document.getElementById('productSelectionModal'));
        // H√†m m·ªü modal th√™m v√†o gi·ªè h√†ng
        function openAddToCartModal(id) {
            if (!localStorage.getItem('token')) {
                window.location.href = 'login.html';
                return;
            }
            document.getElementById('selectedProductId').value = id;
            document.getElementById('modalQuantity').value = 1;
            document.getElementById('modalSize').value = '';
            document.getElementById('modalColor').value = '';
            productSelectionModal.show();
        }
        // C·∫≠p nh·∫≠t s·ªë l∆∞·ª£ng trong modal
        function updateModalQuantity(change) {
            const quantityInput = document.getElementById('modalQuantity');
            const newValue = parseInt(quantityInput.value) + change;
            if (newValue >= 1) {
                quantityInput.value = newValue;
            }
        }
        // Th√™m v√†o gi·ªè h√†ng t·ª´ modal
        async function submitToCart() {
            if (!localStorage.getItem('token')) {
                window.location.href = 'login.html';
                return;
            }
            const productId = document.getElementById('selectedProductId').value;
            const quantity = parseInt(document.getElementById('modalQuantity').value);
            const size = document.getElementById('modalSize').value;
            const color = document.getElementById('modalColor').value;
            if (!size || !color) {
                alert('Vui l√≤ng ch·ªçn ƒë·∫ßy ƒë·ªß k√≠ch c·ª° v√† m√†u s·∫Øc!');
                return;
            }
            // ƒê√≥ng modal ngay khi b·∫•m
            productSelectionModal.hide();
            try {
                const response = await fetch('http://localhost:5140/api/GioHang/add', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${localStorage.getItem('token')}`
                    },
                    body: JSON.stringify({
                        id_SanPham: parseInt(productId),
                        soLuong: quantity,
                        kichCo: parseInt(size),
                        mauSac: color
                    })
                });
                if (response.ok) {
                    alert('ƒê√£ th√™m s·∫£n ph·∫©m v√†o gi·ªè h√†ng!');
                } else {
                    const error = await response.json();
                    alert(error.message || 'C√≥ l·ªói x·∫£y ra khi th√™m v√†o gi·ªè h√†ng!');
                }
            } catch (error) {
                console.error('Error adding to cart:', error);
                alert('C√≥ l·ªói x·∫£y ra khi th√™m v√†o gi·ªè h√†ng!');
            }
        }
        // H√†m render s·∫£n ph·∫©m
        function renderProduct(product, isBestSeller = false) {
            const price = product.giaKhuyenMai || product.giaBan;
            const originalPrice = product.giaKhuyenMai ? `<del class="text-muted me-2">${product.giaBan.toLocaleString()} ‚Ç´</del>` : '';
            return `
                <div class="col-6 col-md-3 position-relative">
                    ${isBestSeller && product.soLuongDaBan > 10 ? '<span class="best-seller-badge">Best</span>' : ''}
                    <div class="product-card p-3 h-100 d-flex flex-column justify-content-between" style="cursor:pointer;" onclick="goToProductDetail(${product.id_SanPham})">
                        <img src="${product.hinhAnh}" class="product-img mb-2" alt="${product.tenSanPham}">
                        <div class="product-title">${product.tenSanPham}</div>
                        <div class="product-price mb-2">
                            ${originalPrice}
                            ${price.toLocaleString()} ‚Ç´
                        </div>
                        <button class="btn btn-primary btn-lg flex-grow-1 w-100 mt-auto" type="button" onclick="event.stopPropagation(); openAddToCartModal(${product.id_SanPham})">
                            <i class="fa fa-shopping-cart me-2"></i>Th√™m v√†o gi·ªè h√†ng
                        </button>
                    </div>
                </div>
            `;
        }

        // Fetch v√† render s·∫£n ph·∫©m n·ªïi b·∫≠t
        async function loadFeaturedProducts() {
            try {
                const response = await fetch('http://localhost:5140/api/SanPham');
                const products = await response.json();
                const featuredProductsContainer = document.getElementById('featuredProducts');
                
                // L·∫•y 4 s·∫£n ph·∫©m ƒë·∫ßu ti√™n l√†m s·∫£n ph·∫©m n·ªïi b·∫≠t
                const featuredProducts = products.slice(0, 4);
                featuredProductsContainer.innerHTML = featuredProducts.map(p => renderProduct(p)).join('');
            } catch (error) {
                console.error('Error loading featured products:', error);
                featuredProductsContainer.innerHTML = '<div class="col-12 text-center text-muted">Kh√¥ng th·ªÉ t·∫£i s·∫£n ph·∫©m n·ªïi b·∫≠t</div>';
            }
        }

        // Fetch v√† render best sellers
        async function loadBestSellers() {
            try {
                const response = await fetch('http://localhost:5140/api/SanPham');
                const products = await response.json();
                const productsList = document.getElementById('productsList');
                
                // L·ªçc v√† s·∫Øp x·∫øp s·∫£n ph·∫©m theo s·ªë l∆∞·ª£ng ƒë√£ b√°n
                const bestSellers = products
                    .sort((a, b) => b.soLuongDaBan - a.soLuongDaBan)
                    .slice(0, 4);
                
                productsList.innerHTML = bestSellers.map(p => renderProduct(p, true)).join('');
            } catch (error) {
                console.error('Error loading best sellers:', error);
                productsList.innerHTML = '<div class="col-12 text-center text-muted">Kh√¥ng th·ªÉ t·∫£i s·∫£n ph·∫©m b√°n ch·∫°y</div>';
            }
        }

        // Load d·ªØ li·ªáu khi trang ƒë∆∞·ª£c t·∫£i
        document.addEventListener('DOMContentLoaded', () => {
            loadFeaturedProducts();
            loadBestSellers();
        });
    </script>
</body>
</html> 